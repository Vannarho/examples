<?xml version="1.0"?>
<Simulation>

  <Parameters>  
    <Discretization>Euler</Discretization>
    <!--<Grid>5,1W</Grid>-->
    <Grid>24,1D</Grid>
    <Calendar>EUR,USD,GBP,CHF</Calendar>
    <Sequence>SobolBrownianBridge</Sequence>
    <Scenario>Simple</Scenario>
    <Seed>42</Seed>
    <Samples>1000</Samples>
    <DayCounter>A365F</DayCounter>
  </Parameters>

  <!--
	This section determines the simulation model composition
	and the calibration of all components.
    -->
  <CrossAssetModel>
    <DomesticCcy>EUR</DomesticCcy>
    <Currencies>
      <Currency>EUR</Currency>
      <Currency>USD</Currency>
      <Currency>HKD</Currency>
    </Currencies>
    <Equities>
      <Equity>SP5</Equity>
      <Equity>SX5E</Equity>
      <Equity>SPX</Equity>
      <Equity>HSCEI</Equity>
    </Equities>
    <Commodities>
      <Commodity>COMDTY_WTI_USD</Commodity>
      <Commodity>COMDTY_GOLD_USD</Commodity>
    </Commodities>
    <CreditNames>
    </CreditNames>
    <BootstrapTolerance>0.0001</BootstrapTolerance>
    <InterestRateModels>
      <LGM ccy="default">
        <CalibrationType>Bootstrap</CalibrationType>
        <!-- Bootstrap, BestFit -->
        <Volatility>
          <Calibrate>Y</Calibrate>
          <VolatilityType>Hagan</VolatilityType>
          <!-- Hagan, HullWhite -->
          <ParamType>Piecewise</ParamType>
          <!-- Constant, Piecewise -->
          <TimeGrid>1.0, 2.0, 3.0, 4.0, 5.0, 7.0, 10.0</TimeGrid>
          <!-- <TimeGrid/> -->
          <InitialValue>0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01</InitialValue>
          <!-- <InitialValue>0.01</InitialValue>-->
        </Volatility>
        <Reversion>
          <Calibrate>N</Calibrate>
          <ReversionType>HullWhite</ReversionType>
          <!-- Hagan, HullWhite -->
          <ParamType>Constant</ParamType>
          <!-- Constant, Piecewise -->
          <TimeGrid/>
          <InitialValue>0.03</InitialValue>
        </Reversion>
        <CalibrationSwaptions>
          <Expiries> 1Y,  2Y,  4Y,  6Y,  8Y, 10Y, 12Y, 14Y, 16Y, 18Y, 19Y</Expiries>
          <Terms>   19Y, 18Y, 16Y, 14Y, 12Y, 10Y,  8Y,  6Y,  4Y,  2Y,  1Y</Terms>
          <Strikes/>
        </CalibrationSwaptions>
        <ParameterTransformation>
          <ShiftHorizon>0.0</ShiftHorizon>
          <Scaling>1.0</Scaling>
        </ParameterTransformation>
      </LGM>
      <LGM ccy="EUR">
        <CalibrationType>Bootstrap</CalibrationType>
        <Volatility>
          <Calibrate>Y</Calibrate>
          <VolatilityType>Hagan</VolatilityType>
          <ParamType>Piecewise</ParamType>
          <TimeGrid>1.0, 2.0, 3.0, 4.0, 5.0, 7.0, 10.0</TimeGrid>
          <InitialValue>0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01</InitialValue>
        </Volatility>
        <Reversion>
          <Calibrate>N</Calibrate>
          <ReversionType>HullWhite</ReversionType>
          <ParamType>Constant</ParamType>
          <TimeGrid/>
          <InitialValue>0.03</InitialValue>
        </Reversion>
        <CalibrationSwaptions>
          <Expiries> 1Y,  2Y,  4Y,  6Y,  8Y, 10Y, 12Y, 14Y, 16Y, 18Y, 19Y</Expiries>
          <Terms>   19Y, 18Y, 16Y, 14Y, 12Y, 10Y,  8Y,  6Y,  4Y,  2Y,  1Y</Terms>
          <Strikes/>
        </CalibrationSwaptions>
        <ParameterTransformation>
          <ShiftHorizon>0.0</ShiftHorizon>
          <Scaling>1.0</Scaling>
        </ParameterTransformation>
      </LGM>
     
    </InterestRateModels>
    <ForeignExchangeModels>
      <CrossCcyLGM foreignCcy="default">
        <DomesticCcy>EUR</DomesticCcy>
        <CalibrationType>Bootstrap</CalibrationType>
        <Sigma>
          <Calibrate>Y</Calibrate>
          <ParamType>Piecewise</ParamType>
          <TimeGrid>1.0, 2.0, 3.0, 4.0, 5.0, 7.0, 10.0</TimeGrid>
          <InitialValue>0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1</InitialValue>
        </Sigma>
        <CalibrationOptions>
          <Expiries>1Y, 2Y, 3Y, 4Y, 5Y, 10Y</Expiries>
          <Strikes/>
          <!-- ATMF, +25D, -25D, 1.2345 -->
        </CalibrationOptions>
      </CrossCcyLGM>
      <CrossCcyLGM foreignCcy="USD">
        <DomesticCcy>EUR</DomesticCcy>
        <CalibrationType>Bootstrap</CalibrationType>
        <Sigma>
          <Calibrate>Y</Calibrate>
          <ParamType>Piecewise</ParamType>
          <TimeGrid>1.0, 2.0, 3.0, 4.0, 5.0, 7.0, 10.0</TimeGrid>
          <InitialValue>0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1</InitialValue>
        </Sigma>
        <CalibrationOptions>
          <Expiries>1Y, 2Y, 3Y, 4Y, 5Y, 10Y</Expiries>
          <Strikes/>
          <!-- ATMF, +25D, -25D, 1.2345 -->
        </CalibrationOptions>
      </CrossCcyLGM>
      <CrossCcyLGM foreignCcy="HKD">
        <DomesticCcy>EUR</DomesticCcy>
        <CalibrationType>Bootstrap</CalibrationType>
        <Sigma>
          <Calibrate>N</Calibrate>
          <ParamType>Piecewise</ParamType>
          <TimeGrid>1.0, 2.0, 3.0, 4.0, 5.0, 7.0, 10.0</TimeGrid>
          <InitialValue>0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1</InitialValue>
        </Sigma>
        <CalibrationOptions>
          <Expiries>1Y, 2Y, 3Y, 4Y, 5Y, 10Y</Expiries>
          <Strikes/>
        </CalibrationOptions>
      </CrossCcyLGM>
    </ForeignExchangeModels>
    <!-- Remove EquityModels for GaussianCamCG which does not support EQ state variables -->
    <EquityModels>
      <CrossAssetLGM name="default">
        <Currency>EUR</Currency>
        <CalibrationType>Bootstrap</CalibrationType>
        <Sigma>
          <Calibrate>Y</Calibrate>
          <ParamType>Piecewise</ParamType>
          <TimeGrid>    1.0, 2.0, 3.0, 4.0, 5.0, 7.0, 10.0</TimeGrid>
          <InitialValue>0.1, 0.1, 0.1, 0.1, 0.1, 0.1,  0.1, 0.1</InitialValue>
        </Sigma>
        <CalibrationOptions>
          <Expiries>1Y, 2Y, 3Y, 4Y, 5Y, 10Y</Expiries>
          <Strikes/>
        </CalibrationOptions>
      </CrossAssetLGM>
      <!-- Intentionally left empty for CG -->
    </EquityModels>    

    <!-- Commodity models for scripted COM trades under CAM-CG (Schwartz 1F); simple constant params -->
    <CommodityModels>
      <CommoditySchwartz name="COMDTY_WTI_USD">
        <Currency>USD</Currency>
        <CalibrationType>None</CalibrationType>
        <Sigma>
          <Calibrate>N</Calibrate>
          <InitialValue>0.25</InitialValue>
        </Sigma>
        <Kappa>
          <Calibrate>N</Calibrate>
          <InitialValue>0.50</InitialValue>
        </Kappa>
        <DriftFreeState>Y</DriftFreeState>
      </CommoditySchwartz>
      <CommoditySchwartz name="COMDTY_GOLD_USD">
        <Currency>USD</Currency>
        <CalibrationType>None</CalibrationType>
        <Sigma>
          <Calibrate>N</Calibrate>
          <InitialValue>0.20</InitialValue>
        </Sigma>
        <Kappa>
          <Calibrate>N</Calibrate>
          <InitialValue>0.30</InitialValue>
        </Kappa>
        <DriftFreeState>Y</DriftFreeState>
      </CommoditySchwartz>
    </CommodityModels>

    <InstantaneousCorrelations>
      <Correlation factor1="IR:EUR" factor2="IR:USD">0.3</Correlation>
      <Correlation factor1="IR:EUR" factor2="FX:EURUSD">0</Correlation>
      <Correlation factor1="IR:USD" factor2="FX:EURUSD">0</Correlation>
      <!-- Minimal COM correlations to FX and IR (kept small) -->
      <Correlation factor1="COM:WTI_USD" factor2="FX:EURUSD">-0.2</Correlation>
      <Correlation factor1="COM:GOLD_USD" factor2="FX:EURUSD">-0.1</Correlation>
      <Correlation factor1="COM:WTI_USD" factor2="IR:USD">0.1</Correlation>
      <Correlation factor1="COM:GOLD_USD" factor2="IR:USD">0.1</Correlation>
    <!-- ... -->
    </InstantaneousCorrelations>
  </CrossAssetModel>

  <Market>

    <BaseCurrency>EUR</BaseCurrency>

    <Currencies>
      <Currency>EUR</Currency>
      <Currency>USD</Currency>
      <Currency>HKD</Currency>
    </Currencies>

    <YieldCurves>
      <Configuration>
        <!--<Tenors>3M,6M,1Y,2Y,3Y,4Y,5Y,6Y,7Y,8Y,9Y,10Y,12Y,15Y,20Y,30Y,40Y,50Y</Tenors>-->
        <Tenors>6M,1Y,2Y,3Y,5Y,7Y,10Y,15Y,20Y</Tenors>
        <Interpolation>LogLinear</Interpolation>
        <!-- Alternative: LinearZero -->
        <Extrapolation>Y</Extrapolation>
      </Configuration>
    </YieldCurves>

    <Indices>
      <Index>EUR-EURIBOR-6M</Index>
      <Index>EUR-EURIBOR-3M</Index>
      <Index>EUR-EONIA</Index>
      <Index>USD-LIBOR-3M</Index>
      <Index>USD-LIBOR-6M</Index>
      <Index>USD-FedFunds</Index>
    </Indices>

    <Commodities>
      <Simulate>true</Simulate>
      <Names>
        <Name>COMDTY_GOLD_USD</Name>
        <Name>COMDTY_WTI_USD</Name>
      </Names>
      <Tenors>1Y,5Y,10Y</Tenors>
    </Commodities>

    <CommodityVolatilities>
      <Simulate>true</Simulate>
      <ReactionToTimeDecay>ForwardForward</ReactionToTimeDecay>
      <Names>
        <Name id="COMDTY_GOLD_USD">
          <Expiries>1Y,5Y,10Y</Expiries>
          <Moneyness>0.0</Moneyness>
        </Name>
        <Name id="COMDTY_WTI_USD">
          <Expiries>1Y,5Y,10Y</Expiries>
          <Moneyness>30.0,40.0,50.0,60.0</Moneyness>
        </Name>
      </Names>
    </CommodityVolatilities>

    <!-- Minimal default curves for XVA CG PP (CVA probability) -->
    <DefaultCurves>
      <SimulateSurvivalProbabilities>true</SimulateSurvivalProbabilities>
      <Names>
        <Name>BANK</Name>
      </Names>
      <Tenors>6M,1Y,2Y,3Y,5Y,7Y,10Y</Tenors>
    </DefaultCurves>

    <SwapIndices>
      <SwapIndex>
        <Name>EUR-CMS-1Y</Name>
        <DiscountingIndex>EUR-EONIA</DiscountingIndex>
      </SwapIndex>
      <SwapIndex>
        <Name>EUR-CMS-30Y</Name>
        <DiscountingIndex>EUR-EONIA</DiscountingIndex>
      </SwapIndex>
      <SwapIndex>
        <Name>USD-CMS-1Y</Name>
        <DiscountingIndex>USD-FedFunds</DiscountingIndex>
      </SwapIndex>
      <SwapIndex>
        <Name>USD-CMS-30Y</Name>
        <DiscountingIndex>USD-FedFunds</DiscountingIndex>
      </SwapIndex>
    </SwapIndices>
    <FxRates>
      <Simulate>true</Simulate>
      <CurrencyPairs>
        <CurrencyPair>EURUSD</CurrencyPair>
        <CurrencyPair>EURHKD</CurrencyPair>
        <CurrencyPair>HKDEUR</CurrencyPair>
      </CurrencyPairs>
    </FxRates>



    <!--
    <DefaultCurves>
      <SimulateSurvivalProbabilities>true</SimulateSurvivalProbabilities>
      <Names>
	<Name>CPTY_C</Name>
	<Name>BANK</Name>
      </Names>
      <Tenors>6M,1Y,2Y</Tenors>
    </DefaultCurves>
    -->
    
    <Equities>
      <SimulateDividendYield>true</SimulateDividendYield>
      <Names>
        <Name>SP5</Name>
        <Name>SX5E</Name>
        <Name>SPX</Name>
        <Name>HSCEI</Name>
      </Names>
      <DividendTenors>6M,1Y,2Y</DividendTenors>
    </Equities>    
    
    <!-- Even if we do not simulate them - option pricing needs vol
	   surfaces, so we need to specify here how we propagate the
	   vol structure and what its composition will be -->
    <SwaptionVolatilities>
      <Simulate>false</Simulate>
      <ReactionToTimeDecay>ForwardVariance</ReactionToTimeDecay>
      <Currencies>
        <Currency>EUR</Currency>
        <Currency>USD</Currency>
        <Currency>HKD</Currency>
      </Currencies>
      <Expiries>6M,1Y,2Y,3Y,5Y,10Y,12Y,15Y,20Y</Expiries>
      <Terms>1Y,2Y,3Y,4Y,5Y,7Y,10Y,15Y,20Y,30Y</Terms>
    </SwaptionVolatilities>
    
    <CapFloorVolatilities>
      <Simulate>false</Simulate>
      <ReactionToTimeDecay>ConstantVariance</ReactionToTimeDecay>
      <Currencies>
        <Currency>EUR</Currency>
        <Currency>USD</Currency>
      </Currencies>
      <Expiries>6M,1Y,2Y,3Y,5Y,7Y,10Y,15Y,20Y</Expiries>
      <Strikes>0.00,0.01,0.02,0.03,0.04,0.05,0.06</Strikes>
    </CapFloorVolatilities>

    <FxVolatilities>
      <Simulate>false</Simulate>
      <ReactionToTimeDecay>ForwardVariance</ReactionToTimeDecay>
      <CurrencyPairs>
        <CurrencyPair>EURUSD</CurrencyPair>
        <CurrencyPair>EURHKD</CurrencyPair>
        <CurrencyPair>HKDEUR</CurrencyPair>
      </CurrencyPairs>
      <Expiries>6M,1Y,2Y,3Y,4Y,5Y,7Y,10Y</Expiries>
    </FxVolatilities> 

    <EquityVolatilities>
      <Simulate>false</Simulate>
      <ReactionToTimeDecay>ForwardVariance</ReactionToTimeDecay>
      <!-- Alternative: ConstantVariance -->
      <Names>
        <Name>SP5</Name>
        <Name>SX5E</Name>
        <Name>SPX</Name>
        <Name>HSCEI</Name>
      </Names>
      <Expiries>6M,1Y,2Y,3Y,4Y,5Y,7Y,10Y</Expiries>
    </EquityVolatilities>     

    <BenchmarkCurves>
      <BenchmarkCurve>
	<Currency>EUR</Currency>
	<Name>BENCHMARK_EUR</Name>
      </BenchmarkCurve>
    </BenchmarkCurves>

    <!-- Additional data that is recorded during simulation for later
	   use in the post processor -->
    <AggregationScenarioDataCurrencies>
      <Currency>EUR</Currency>
      <Currency>USD</Currency>
    </AggregationScenarioDataCurrencies>

    <AggregationScenarioDataIndices>
      <Index>EUR-EURIBOR-3M</Index>
      <Index>EUR-EONIA</Index>
      <Index>USD-LIBOR-3M</Index>
    </AggregationScenarioDataIndices>

    <AggregationScenarioDataDividendEquities>
      <Name>SP5</Name>
      <Name>SPX</Name>
      <Name>SX5E</Name>
      <Name>HSCEI</Name>
    </AggregationScenarioDataDividendEquities>

    <AggregationScenarioDataSurvivalNames>
      <Name>BANK</Name>
    </AggregationScenarioDataSurvivalNames>

    <AggregationScenarioDataCommodities>
      <Name>COMDTY_WTI_USD</Name>
      <Name>COMDTY_GOLD_USD</Name>
    </AggregationScenarioDataCommodities>

  </Market>

</Simulation>
